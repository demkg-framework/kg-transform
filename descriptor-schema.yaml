#############################
#                           #
# DATASET DESCRIPTOR SCHEMA #
#                           #
#############################

# This is the daset descriptor schema that guides the transformer module to access the data values from your dataset and 
# generate the KG entities and edges using the implmented mapping rules under the design patterns. 
# The descriptor provides information about the input data file, the columns containing the data values, and the mapping rules. 

# The supported research data artifacts are 
# Subject data, 
# Medical history
# Physical examination
# Cognitive screening
# Diagnosis
# Specimen assays (ELISA, proteomics, etc.)
# Imaging analyses (Freesurfer, ASHS, etc.)

# Each section has an associated entity ID, and date. If your dataset does not provide one, it will be autogenerated. 
# The main aim of the transformer is to map data values from your dataset to concrete ontological concepts describing phenotypes and/or diseases. 
# For this, the approach consists on describing possible values and target entities through value_mappings subsections. These mappings may be based 
# on direct, categorical values, or numeric based on defined cutoffs or ranges. 

# In order to find good ontology terms to map with your data, it is important to note that the DemKG framework is primarily based on the OBO ontologies
# and, principles and extensions. The following ontologies are a good starting point to find terms to map your data:
# - Human Phenotype Ontology (HP)
# - Monarch Disease Ontology (MONDO)
# - Phenotypic Quality Ontology (PATO)
# - Uber Anatomy Ontology (UBERON)
# - Foundational Model of Anatomy (FMA)
# - Protein Ontology (PR)
# - Gene Ontology (GO)
# - Neuropsychological Test Ontology (NPT)
# - Ontology for Biomedical Investigations (OBI)
# - Mass Spectrometry Ontology (MS)
# - Unit Ontology (UO)

# To search for ontology terms, you can use the following tools:
# - OLS: https://www.ebi.ac.uk/ols4/
# - BioPortal: https://bioportal.bioontology.org/
# - Ontobee: http://www.ontobee.org/

# Bellow are the sections for each research data artifact. If your dataset does not contain a specific research data artifact,
# you can remove the section from your descriptor.


# BASIC DATA CONFIGURATION
# This section provides the path to the input data file, the name of the column containing the visit ID,
# the prefix of the ID of the entities generated by the transformer, and the path to the output file.
config:
  input: # The path to the input file
  visit_id_col_name: # The name of the column containing the visit ID
  prefix: # The prefix of the ID of the entities generated by the transformer. For example, if the prefix is 'STUDYDATA', the ID of the entity representing the subject will be 'STUDYDATA:subject_id'
  destination: # The path to the output file

subject:
  id_col: # The name of the column containing the subject ID
  gender: # The name of column containing the gender string
  handedness: # The name of column containing the handedness string
  education: # The name of the column containing the education level


# MEDICAL HISTORY
# This sections provide the mappings for the findings obtained through the 'medical history taking' process. 
medical_history:
  id_col: # The name of the column containing the medical history ID, if any
  date_col: # The name of the column containing the date of the medical history, if any
  
  # The list of findings, each with the name of the column containing the finding and the value mappings
  # to specify target phenotypes and diseases. The value mappings can be categorical or cutoff.
  # For categorical mappings, the value of the column is mapped to a target phenotype or disease
  # if it is equal to the key of the mapping. 
  # For cutoff mappings, the value of the column is mapped
  # to a target phenotype or disease if it is greater than the key of the mapping.
  findings:
    - 
      col_name: # the name of the column to map the value
      value_phenotype_mappings:
        type: categorical
        mappings:
          1: # the entity representing the finding, usually a Disease (preferably MONDO) or Phenotype (preferably HP)
          0: # the ID of the entity representing the normal phenotype, usually a descendant of 'Phenotypic Normality' (DEMKG:0000001)
      
    - 
      col_name: # another column to map the value
      value_phenotype_mappings:
      type: categorical
        mappings:
          3: 
          2:
          1: 
          0: 

# PHYSICAL EXAMINATION
# This sections provide the mappings for the findings obtained through the 'physical examination' process. 
physical_exam:
  id_col: # the name of the column with the ID for this encounter
  date_col: # the name of the column with the date
  # The findings operates the same way as in Medical History. The transformer will associate with the physical examination entities from the ontological
  # design patterns. 
  findings:
    - 
      col_name: # the name of the column with the value
      value_phenotype_mappings:
        type: categorical
          mappings:
            1: # the entity representing the finding, usually a Disease (preferably MONDO) or Phenotype (preferably HP)
            0: # the ID of the entity representing the normal phenotype, usually a descendant of 'Phenotypic Normality' (DEMKG:0000001)
      
    # rest of findings

# COGNITIVE SCREENING
# The cognitive screening consists on a set of neuropsychological tests that provide specific scores. 
# The descriptor allows to associate value columns as the output of specific tests. This section relies mainly on terms from the 
# Neuropsychological Test ontology (NPT) and DEMKG extensions. 
cognitive_screening: 
  id_col: 
  date_col:
  # The set of scores from the tests. Each score is associated to the ontology term that is defined for the test.  
  scores:
    -
      test_class: # The class CURIE of assay used to measure the score, e.g. 'ADNI trail making test B assay' is NPT:0020142
      score_col: #the name of the column containing the score of the test
      score_type: # The CURIE of the score type, e.g. 'ADNI trail making test time scalar measurement datum' is NPT:0020139
      value_phenotype_mappings:
        type: cutoff # Typically, the score is a number and the phenotype is mapped based on a cutoff value, e.g. a T-Score
          mappings:
            '<36': # the entity representing the finding, usually a Disease (preferably MONDO) or Phenotype (preferably HP)
            '>35': # If applicable, the ID of the entity representing the normal phenotype, usually a descendant of 'Phenotypic Normality' (DEMKG:0000001)

# DIAGNOSIS
# The diagnosis process. This descriptor allows to define disease/phenotype outcome based on the categorical column of the diagnosis
diagnosis:
  id_col: 
  date_col:
  col_name: # The name of the column containing the diagnosis value
  value_phenotype_mappings:
    type: categorical
      mappings:
        abnormal_value: # the entity representing the finding, usually a Disease (preferably MONDO) or Phenotype (preferably HP)
        normal_value: # the ID of the entity representing the normal phenotype, usually a descendant of 'Phenotypic Normality' (DEMKG:0000001)

# SPECIMEN ASSAYS
# This descriptor allows to define specimen assays, such as ELISA, mass-spec proteomics, etc.
# The descriptor allows to define the specimen type, the assay type, and the measurements obtained from the assay.
# The measurements are associated to the assay type, the analyte measured, and the units of the measurement.
# The value mappings are defined based on cutoffs, where the value of the measurement is mapped to a phenotype or disease
specimen_assays:
  - 
    specimen_assay:
      id_col: 
      date_col: # The name of the column containing the date of the specimen collection, e.g. the date of the spinal puncture
      specimen: # The anatomical entity from which the specimen is derived (e.g. 'cerebrospinal fluid' UBERON:0001359)
      measurements:
        -
          assay_type: # The CURIE of the assay type, e.g. 'cerebrospinal fluid protein assay' OBI:2100266
          date_col: # The column with the date of the measurement assay
          col_name: # The name of the column containing the measurement value
          target_analyte: # The CURIE of the analyte entity measured by the assay, e.g. 'beta-amyloid protein 42 (human)' PR:000050063
          units: # The CURIE of the units of the measurement, e.g. 'picogram per milliliter' UO:0010070
          value_phenotype_mappings:
            type: cutoff # Typically, the score is a number and the phenotype is mapped based on a cutoff value
              mappings:
                '<1000': # The CURIE of the phenotype or output of a value under reference 
                '>999': # The CURIE of the phenotype or similar output entity for this cutoff

# IMAGING ANALYSES
# This descriptor allows to define imaging analyses, such as Freesurfer, ASHS, etc.
# The descriptor allows to define the imaging assay type, the session from which the imaging data was derived, and the measurements obtained from the assay.
# The measurements are associated to the anatomical entity of the measurement, the measurement type, and the units of the measurement.
# The value mappings are defined based on cutoffs, where the value of the measurement is mapped to a phenotype or disease
imaging_analyses:
  # The list of imaging assessments available in the dataset 
  -
    imaging_analysis:
      id_col
      date_col:
      # An imaging analysis has a type of imaging assay, a session from which the imaging data was derived, 
      imaging_assay_type: # The CURIE of the imaging assay, e.g. 'magnetic resonance imaging' OBI:0000070
      source_session: # The internal ID of the session from which the imaging data was derived
      # and a list of measurements, each with the anatomical entity of the measurement, the measurement type, 
      # the column containing the measurement value, the units of the measurement, and optionally the value mappings to specify target phenotypes and diseases. 
      measurements:
        -
          measured_entity: # The CURIE of the anatomical entity of the measurement, e.g. 'left hippocampus' FMA:72714
          measurement_type: # The CURIE of the measurement type, e.g. 'volume' PATO:0000918
          col_name: # The name of the column containing the measurement value
          units: # The CURIE of the units of the measurement
          value_phenotype_mappings:
            type: cutoff # Typically, the score is a number and the phenotype is mapped based on a cutoff value
              mappings:
                '<1000': # The CURIE of the phenotype or output of a value under reference 
                '>999': # The CURIE of the phenotype or similar output entity for this cutoff

